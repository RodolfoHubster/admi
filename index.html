<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitoscents - Dashboard</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

<div class="container my-4">
    
    <!-- Header -->
    <div class="row mb-4">
        <div class="col">
            <h2 class="fw-bold">üìä Dashboard de Negocio</h2>
            <p class="text-muted mb-0">Vista general de tu operaci√≥n - <span id="fecha-actual"></span></p>
        </div>
    </div>

    <!-- SECCI√ìN 1: DINERO REAL (Lo m√°s importante) -->
    <div class="row g-3 mb-4">
        <div class="col-12">
            <h5 class="text-uppercase text-muted fw-bold mb-3">üí∞ TU DINERO REAL</h5>
        </div>
        
        <!-- Ganancia Neta (Lo que realmente ganaste) -->
        <div class="col-md-6">
            <div class="card shadow-lg border-0 h-100" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body text-white p-4">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <small class="opacity-75 d-block mb-1">üíµ GANANCIA NETA REAL</small>
                            <h1 class="display-4 fw-bold mb-0" id="ganancia-neta-real">$0</h1>
                        </div>
                        <i class="bi bi-cash-stack" style="font-size: 3rem; opacity: 0.3;"></i>
                    </div>
                    <div class="mt-3 pt-3 border-top border-white border-opacity-25">
                        <small class="opacity-75">Ventas cobradas - Gastos operativos</small>
                        <div class="mt-2">
                            <span class="badge bg-white bg-opacity-25" id="badge-cobrado">Cobrado: $0</span>
                            <span class="badge bg-white bg-opacity-25 ms-2" id="badge-gastos-desc">Gastos: $0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Por Cobrar (Dinero que te deben) -->
        <div class="col-md-6">
            <div class="card shadow-lg border-0 h-100" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <div class="card-body text-white p-4">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <small class="opacity-75 d-block mb-1">‚è≥ POR COBRAR A CLIENTES</small>
                            <h1 class="display-4 fw-bold mb-0" id="dinero-por-cobrar">$0</h1>
                        </div>
                        <i class="bi bi-hourglass-split" style="font-size: 3rem; opacity: 0.3;"></i>
                    </div>
                    <div class="mt-3 pt-3 border-top border-white border-opacity-25">
                        <small class="opacity-75">Ventas a cr√©dito pendientes</small>
                        <div class="mt-2">
                            <span class="badge bg-white bg-opacity-25" id="clientes-deudores">0 clientes</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN 2: INVENTARIO (Capital invertido) -->
    <div class="row g-3 mb-4">
        <div class="col-12">
            <h5 class="text-uppercase text-muted fw-bold mb-3">üì¶ INVENTARIO ACTUAL</h5>
        </div>

        <!-- Capital Invertido -->
        <div class="col-md-4">
            <div class="card shadow border-0 bg-danger bg-opacity-10 border-danger border-2 h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <small class="text-danger fw-bold">üí∏ CAPITAL INVERTIDO</small>
                        <i class="bi bi-coin text-danger fs-3 opacity-50"></i>
                    </div>
                    <h2 class="fw-bold text-danger mb-2" id="capital-invertido">$0</h2>
                    <small class="text-muted">Dinero "congelado" en botellas</small>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%" id="progress-capital"></div>
                    </div>
                    <small class="text-muted d-block mt-1"><span id="botellas-stock">0</span> botellas en stock</small>
                </div>
            </div>
        </div>

        <!-- Valor Potencial -->
        <div class="col-md-4">
            <div class="card shadow border-0 bg-primary bg-opacity-10 border-primary border-2 h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <small class="text-primary fw-bold">üíé VALOR POTENCIAL</small>
                        <i class="bi bi-gem text-primary fs-3 opacity-50"></i>
                    </div>
                    <h2 class="fw-bold text-primary mb-2" id="valor-potencial">$0</h2>
                    <small class="text-muted">Si vendes todo hoy</small>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 100%"></div>
                    </div>
                    <small class="text-muted d-block mt-1">Ganancia proyectada: <span class="text-primary fw-bold" id="ganancia-proyectada">$0</span></small>
                </div>
            </div>
        </div>

        <!-- En Camino -->
        <div class="col-md-4">
            <div class="card shadow border-0 bg-warning bg-opacity-10 border-warning border-2 h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <small class="text-warning fw-bold">üöö EN CAMINO</small>
                        <i class="bi bi-truck text-warning fs-3 opacity-50"></i>
                    </div>
                    <h2 class="fw-bold text-warning mb-2" id="valor-en-camino">$0</h2>
                    <small class="text-muted">Paquetes en tr√°nsito</small>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 0%" id="progress-camino"></div>
                    </div>
                    <small class="text-muted d-block mt-1"><span id="paquetes-camino">0</span> paquetes esperando</small>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN 3: GR√ÅFICAS -->
    <div class="row g-4 mb-4">
        <!-- Gr√°fica: Ventas por Mes -->
        <div class="col-md-8">
            <div class="card shadow border-0">
                <div class="card-header bg-dark text-white py-3">
                    <h6 class="mb-0 fw-bold">üìà Ventas por Mes (√öltimos 6 meses)</h6>
                </div>
                <div class="card-body p-4">
                    <canvas id="chartVentasMes" height="100"></canvas>
                </div>
            </div>
        </div>

        <!-- Gr√°fica: Distribuci√≥n Inventario -->
        <div class="col-md-4">
            <div class="card shadow border-0 h-100">
                <div class="card-header bg-dark text-white py-3">
                    <h6 class="mb-0 fw-bold">üéØ Estado del Inventario</h6>
                </div>
                <div class="card-body p-4 d-flex align-items-center justify-content-center">
                    <canvas id="chartInventario"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN 4: TOP PRODUCTOS -->
    <div class="row g-4 mb-4">
        <!-- Top M√°s Rentables -->
        <div class="col-md-6">
            <div class="card shadow border-0">
                <div class="card-header bg-success text-white py-3">
                    <h6 class="mb-0 fw-bold">üí∞ Top 5 M√°s Rentables</h6>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>#</th>
                                    <th>Producto</th>
                                    <th class="text-end">Ganancia</th>
                                </tr>
                            </thead>
                            <tbody id="table-rentables">
                                <tr>
                                    <td colspan="3" class="text-center text-muted">Cargando...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top M√°s Vendidos -->
        <div class="col-md-6">
            <div class="card shadow border-0">
                <div class="card-header bg-info text-white py-3">
                    <h6 class="mb-0 fw-bold">üî• Top 5 M√°s Vendidos (30 d√≠as)</h6>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>#</th>
                                    <th>Producto</th>
                                    <th class="text-end">Vendidos</th>
                                </tr>
                            </thead>
                            <tbody id="table-vendidos">
                                <tr>
                                    <td colspan="3" class="text-center text-muted">Cargando...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN 5: ACCIONES R√ÅPIDAS -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow border-0">
                <div class="card-header bg-dark text-white py-3">
                    <h6 class="mb-0 fw-bold">üöÄ Acciones R√°pidas</h6>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <a href="products.html" class="btn btn-outline-primary w-100 py-3">
                                <i class="bi bi-plus-circle fs-4 d-block mb-2"></i>
                                Registrar Compra
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="ventas.html" class="btn btn-outline-success w-100 py-3">
                                <i class="bi bi-cart-check fs-4 d-block mb-2"></i>
                                Ver Ventas
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="clientes.html" class="btn btn-outline-danger w-100 py-3">
                                <i class="bi bi-people fs-4 d-block mb-2"></i>
                                Cobrar Deudas
                            </a>
                        </div>
                        <div class="col-md-3">
                            <button onclick="descargarRespaldoGlobal()" class="btn btn-outline-dark w-100 py-3">
                                <i class="bi bi-cloud-download fs-4 d-block mb-2"></i>
                                Respaldar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="components/header.js"></script>
<script src="assets/js/config.js"></script>
<script src="assets/js/utils.js"></script>
<script src="assets/js/inventory.js"></script>
<script src="assets/js/sales.js"></script>
<script src="assets/js/backup.js"></script>
<script src="assets/js/dashboard.js"></script>

</body>
</html>
